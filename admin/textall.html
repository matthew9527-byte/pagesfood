<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Login Page</title>
  <script>
    // Hàm gọi API để lấy user từ server
    async function fetchUsers() {
      try {
        const response = await fetch("https://jsonplaceholder.typicode.com/users");
        if (!response.ok) throw new Error("Lỗi khi lấy dữ liệu");
        return await response.json();
      } catch (error) {
        console.error(error);
        alert("Không thể kết nối server!");
        return [];
      }
    }

    // Hàm xử lý login
    async function handleLogin(event) {
      event.preventDefault();

      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();

      const users = await fetchUsers();

      // kiểm tra user có tồn tại hay không
      const foundUser = users.find(u => u.username.toLowerCase() === username.toLowerCase());

      if (foundUser && password === "123456") {
        alert(`✅ Login thành công! Xin chào ${foundUser.username}`);
        window.location.href = "adminwedfood.html";
      } else {
        alert("❌ Username không tồn tại trong danh sách admin hoặc sai mật khẩu!");
      }
    }
  </script>
</head>

<body>
  <h2>Login</h2>
  <form onsubmit="handleLogin(event)">
    <label>
      Username:
      <input type="text" id="username" required>
    </label>
    <br><br>
    <label>
      Password:
      <input type="password" id="password" required>
    </label>
    <br><br>
    <button type="submit">Login</button>
  </form>
</body>

</html>